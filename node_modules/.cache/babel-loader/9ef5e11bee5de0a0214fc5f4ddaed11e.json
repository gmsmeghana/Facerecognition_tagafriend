{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hi\\\\facereco\\\\faceapi\\\\src\\\\components\\\\NewPost.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NewPost = _ref => {\n  _s();\n\n  let {\n    image\n  } = _ref;\n  const {\n    url,\n    width,\n    height\n  } = image;\n  const [faces, setFaces] = useState([]);\n  const [friends, setFriends] = useState([]);\n  const imgRef = useRef();\n  const canvasRef = useRef();\n\n  const handleImage = async () => {\n    const detections = await faceapi.detectAllFaces(imgRef.current, new faceapi.TinyFaceDetectorOptions());\n    setFaces(detections.map(d => Object.values(d.box)));\n  };\n\n  const enter = () => {\n    const ctx = canvasRef.current.getContext(\"2d\");\n    ctx.lineWidth = 5;\n    ctx.strokeStyle = \"yellow\";\n    faces.map(face => ctx.strokeRect(...face));\n  };\n\n  useEffect(() => {\n    const loadModels = () => {\n      Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")]).then(handleImage).catch(e => console.log(e));\n    };\n\n    imgRef.current && loadModels();\n  }, []);\n\n  const addFriend = e => {\n    setFriends(prev => ({ ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  console.log(friends);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left\",\n      style: {\n        width,\n        height\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        ref: imgRef,\n        crossOrigin: \"anonymous\",\n        src: url,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        onMouseEnter: enter,\n        ref: canvasRef,\n        width: width,\n        height: height\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), faces.map((face, i) => /*#__PURE__*/_jsxDEV(\"input\", {\n        name: `input${i}`,\n        style: {\n          left: face[0],\n          top: face[1] + face[3] + 5\n        },\n        placeholder: \"Tag a friend\",\n        className: \"friendInput\",\n        onChange: addFriend\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"S\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Upload a Photo\",\n        className: \"rightInput\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), friends && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"friends\",\n        children: [\"with \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"name\",\n          children: Object.values(friends) + \" \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"rightButton\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NewPost, \"XJXgLrAMYHGjYz6dXcHJ2ibTOzE=\");\n\n_c = NewPost;\nexport default NewPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewPost\");","map":{"version":3,"names":["useEffect","useRef","useState","faceapi","NewPost","image","url","width","height","faces","setFaces","friends","setFriends","imgRef","canvasRef","handleImage","detections","detectAllFaces","current","TinyFaceDetectorOptions","map","d","Object","values","box","enter","ctx","getContext","lineWidth","strokeStyle","face","strokeRect","loadModels","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceExpressionNet","then","catch","e","console","log","addFriend","prev","target","name","value","i","left","top"],"sources":["C:/Users/hi/facereco/faceapi/src/components/NewPost.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport * as faceapi from \"face-api.js\";\r\n\r\nconst NewPost = ({ image }) => {\r\n  const { url, width, height } = image;\r\n  const [faces, setFaces] = useState([]);\r\n  const [friends, setFriends] = useState([]);\r\n\r\n  const imgRef = useRef();\r\n  const canvasRef = useRef();\r\n\r\n  const handleImage = async () => {\r\n    const detections = await faceapi.detectAllFaces(\r\n      imgRef.current,\r\n      new faceapi.TinyFaceDetectorOptions()\r\n    );\r\n    setFaces(detections.map((d) => Object.values(d.box)));\r\n  };\r\n\r\n  const enter = () => {\r\n    const ctx = canvasRef.current.getContext(\"2d\");\r\n    ctx.lineWidth = 5;\r\n    ctx.strokeStyle = \"yellow\";\r\n    faces.map((face) => ctx.strokeRect(...face));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadModels = () => {\r\n      Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\r\n        faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"),\r\n      ])\r\n        .then(handleImage)\r\n        .catch((e) => console.log(e));\r\n    };\r\n\r\n    imgRef.current && loadModels();\r\n  }, []);\r\n\r\n  const addFriend = (e) => {\r\n    setFriends((prev) => ({ ...prev, [e.target.name]: e.target.value }));\r\n  };\r\n\r\n  console.log(friends);\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"left\" style={{ width, height }}>\r\n        <img ref={imgRef} crossOrigin=\"anonymous\" src={url} alt=\"\" />\r\n        <canvas\r\n          onMouseEnter={enter}\r\n          ref={canvasRef}\r\n          width={width}\r\n          height={height}\r\n        />\r\n        {faces.map((face, i) => (\r\n          <input\r\n            name={`input${i}`}\r\n            style={{ left: face[0], top: face[1] + face[3] + 5 }}\r\n            placeholder=\"Tag a friend\"\r\n            key={i}\r\n            className=\"friendInput\"\r\n            onChange={addFriend}\r\n          />\r\n        ))}\r\n      </div>\r\n      <div className=\"right\">\r\n        <h1>S</h1>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Upload a Photo\"\r\n          className=\"rightInput\"\r\n        />\r\n        {friends && (\r\n          <span className=\"friends\">\r\n            with <span className=\"name\">{Object.values(friends) + \" \"}</span>\r\n          </span>\r\n        )}\r\n        <button className=\"rightButton\">Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}